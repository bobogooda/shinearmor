"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){function e(){return(new Date).toISOString()}function t(){var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"}function r(){try{var e=window._q('input[name="product"]:checked').dataset.product;return e?JSON.parse(e):null}catch(e){console.log(e)}}function o(){function t(){try{var t=window._qById("customer_firstname")?window._qById("customer_firstname").value:"",r=window._qById("customer_lastname")?window._qById("customer_lastname").value:"";t||(t=window._qById("shipping_firstname")?window._qById("shipping_firstname").value:""),r||(r=window._qById("shipping_lastname")?window._qById("shipping_lastname").value:"");var o={email:window._qById("customer_email").value,firstname:t,lastname:r,phone_number:s||window._qById("customer_phone").value,phone_valid:n,phone_linetype:a,phone_carrier:u,ship_city:window._qById("shipping_city").value,ship_address:window._qById("shipping_address1").value,ship_state:window._qById("shipping_province").value,ship_zip:window._qById("shipping_postal").value,ship_country:window._qById("shipping_country").value,customer_language:document.querySelector("html").getAttribute("lang")||"",joined_at:e(),fingerprint_id:window._EA_ID,referrer:document.referrer};return window.CC_Code&&(o.coupon=window.CC_Code),o}catch(e){console.log(e)}}function o(e){try{var t=window.localStorage.getItem("doubleQuantity")?e.quantity/2:e.quantity,r=window.location.href,o="";return r&&(o=r.split("?")[0]),{email:window._qById("customer_email").value||"",product_ids:[e.productId],items:[{productId:e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:t}],sku:e.sku,currency:window.localStorage.getItem("currencyCode"),landing_base_url:o,customer_language:document.querySelector("html").getAttribute("lang")||""}}catch(e){console.log(e)}}if(window.localStorage.removeItem("isFiredMainOrderBlueshift"),(l=window.campaignInfo)&&window._EA_ID&&!window.orderFired){console.log("BlueShift",l,window._EA_ID),c=l.location.countryCode;var i=r();window.orderFired=!0;var n="",a="",u="",s="",p=Array.prototype.slice.call(document.querySelectorAll(".customer-email, .shipping-firstname, .shipping-lastname, .customer-phone")),w=t();blueshift.identify(w),p.forEach(function(e){e.addEventListener("change",function(e){try{if(w=t(),"customer_email"===e.currentTarget.getAttribute("id")&&window._qById("customer_email").classList.contains("input-valid")&&(console.log("BlueShift - Fire identify"),blueshift.identify(w),i=r(),blueshift.track("add_to_cart",o(i))),"customer_phone"===e.currentTarget.getAttribute("id")&&""!==e.currentTarget.value){var l=e.currentTarget.value.match(/\d/g).join(""),d="//apilayer.net/api/validate?access_key=755a648d3837cf3adb128f29d322879a&number=".concat(l);c&&(d+="&country_code=".concat(c.toLowerCase())),window.utils.callAjax(d,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){n=e.valid,a=e.line_type,u=e.carrier,n&&(s=e.international_format,w=t(),blueshift.identify(w))}).catch(function(e){console.log(e)})}}catch(e){console.log(e)}})}),window.utils.events.on("onActivePopup",function(){window.CC_Code=window.nextPurchaseCoupon||window.couponCodeId||!0,w=t(),blueshift.identify(w)}),window.utils.events.on("beforeSubmitOrder",function(){try{w=t(),blueshift.identify(w),window.localStorage.setItem("identifyData",JSON.stringify(w));var e=r();e.campaignName=d,window.localStorage.setItem("prevItem",JSON.stringify(e)),console.log("BlueShift - Fire checkout");for(var o=function(){var e=r(),t=window.localStorage.getItem("doubleQuantity")?e.quantity/2:e.quantity;return{products:[{productId:e.productId,sku:e.sku,total_usd:(e.productPrices.DiscountedPrice.Value+e.shippings[window.shippingIndex||0].price).toFixed(2),quantity:t}],sku:e.sku}}(),i=o.products,n=[],a=0,c=i.length;a<c;a++)n.push(i[a].productId);blueshift.track("checkout",{fingerprintId:window._EA_ID,referrer:document.referrer,countryCode:w.ship_country,regionCode:w.ship_state,ip:l.location.ip,product_ids:n,items:i,sku:o.sku,currency:window.localStorage.getItem("currencyCode")})}catch(e){console.log(e)}}),window.localStorage.setItem("location",JSON.stringify(l.location)),Array.prototype.slice.call(window._qAll('input[name="product"]')).forEach(function(e){e.addEventListener("change",function(){try{var e=r();if(e.productId===i.productId)return;document.querySelector("#customer_email")&&document.querySelector("#customer_email").classList.contains("input-valid")&&(blueshift.track("remove_from_cart",o(i)),blueshift.track("add_to_cart",o(e))),i=r()}catch(e){console.log(e)}})})}}function i(){try{if(window.location.href.indexOf("/order")>-1){o();var r=0,i=setInterval(function(){r++,window.PRICES&&window._EA_ID&&(o(),clearInterval(i)),50===r&&clearInterval(i)},300);return}var n=window.localStorage.getItem("orderInfo"),l=window.localStorage.getItem("location"),c=window.localStorage.getItem("isFiredMainOrderBlueshift"),u=window._EA_ID||window.localStorage.getItem("_vid");window.localStorage.getItem("referrerUrl")||window.localStorage.setItem("referrerUrl",document.referrer);var s=function(r,o){var i=r.orderNumber,n=window.localStorage.getItem("doubleQuantity")?r.quantity/2:r.quantity,a=Number(r.orderTotalFull),c=[{productId:r.orderedProducts[0].pid,sku:r.orderedProducts[0].sku,total_usd:r.orderTotalFull,quantity:n}],u=r.orderedProducts[0].sku;if(r.upsellUrls&&r.upsellUrls.length>0)for(var s=0,p=r.upsellUrls.length;s<p;s++)"fired"===r.upsellUrls[s].isFired&&(a+=r.upsellUrls[s].price);o&&(i=r.orderNumber,d=o.campaignName,c=[{productId:o.orderedProducts[0].pid,sku:o.orderedProducts[0].sku,total_usd:o.price,quantity:o.orderedProducts[0].quantity}],u=o.orderedProducts[0].sku);for(var w=[],f=0,m=c.length;f<m;f++)w.push(c[f].productId);var g=window.location.href,_="";return g&&(_=g.split("?")[0]),{order_id:i,customer_id:r.customerId,email:r.cusEmail,order_create_date:e(),ip_address:l.ip||"",customer_language:document.querySelector("html").getAttribute("lang")||"",device_type:t(),device_vendor:window.navigator.vendor,campaignname:d,internal_campaignname:d,landingurl:g,landing_base_url:_,referringurl:document.referrer,parentcampaign:window.localStorage.getItem("mainCampaignName"),product_ids:w,items:c,sku:u,revenue:a.toFixed(2),currency:window.localStorage.getItem("currencyCode")}};if(n&&u){n=JSON.parse(n),l=JSON.parse(l||"{}");var p=window.localStorage.getItem("identifyData");if(p&&(p=JSON.parse(p),p.customer_id||(p.customer_id=n.customerId),window.localStorage.setItem("identifyData",JSON.stringify(p)),blueshift.identify(p)),c){if(n.upsellUrls&&n.upsellUrls.length>0){var w=n.upsellUrls.length-1,f=n.upsellUrls[w],m=localStorage.getItem("subOrderNumber");n.upsellUrls[w].isFired||n.upsellUrls[w].orderNumber===m||(n.upsellUrls[w].isFired="fired",console.log("BlueShift - Fire Purchase"),blueshift.track("purchase",s(n,f)))}}else console.log("BlueShift - Fire Purchase"),n.upsellUrls&&n.upsellUrls.length>0&&localStorage.setItem("subOrderNumber",n.upsellUrls[0].orderNumber),blueshift.track("purchase",s(n)),window.localStorage.setItem("isFiredMainOrderBlueshift",!0);window.localStorage.setItem("orderInfo",JSON.stringify(n))}if(window.utils.events.on("onBeforePlaceUpsellOrder",function(){var e=window.upsell.products[window.upsell_productindex];e.campaignName=d,window.localStorage.setItem("prevItem",JSON.stringify(e))}),a.indexOf("decline")>-1){var g=JSON.parse(window.localStorage.getItem("prevItem"));if(g){for(var _=window.localStorage.getItem("doubleQuantity")?g.quantity/2:g.quantity,h=[{productId:g.productId,sku:g.sku,total_usd:(g.productPrices.DiscountedPrice.Value+g.shippings[window.shippingIndex||0].price).toFixed(2),quantity:_}],y=g.sku,b=[],v=0,I=h.length;v<I;v++)b.push(h[v].productId);var S=window.location.href,O="";S&&(O=S.split("?")[0]);var k={order_create_date:e(),ip_address:l.ip||"",internal_campaignname:g.campaignName,device_type:t(),device_vendor:window.navigator.vendor,campaignname:g.campaignName,landingurl:S,landing_base_url:O,referringurl:document.referrer,parentcampaign:window.localStorage.getItem("mainCampaignName"),product_ids:b,items:h,sku:y};n&&(k=_objectSpread(_objectSpread({},k),{},{order_id:n.orderNumber,customer_id:n.customerId,customer_language:document.querySelector("html").getAttribute("lang")||""})),blueshift.track("decline",k)}}}catch(e){console.log(e)}}console.log("BlueShift");var n="1"===function(e){var t="";location.href.indexOf("?")&&(t=location.href.substr(location.href.indexOf("?")));var r=t.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return r?r[1]:null}("isCardTest")?"fa8307145a64f9484defb6d8a18940f0":"13c25a652e2a0c05cb06a3b1dba09a85";window._blueshiftid=n,window.blueshift=window.blueshift||[],blueshift.constructor===Array&&(blueshift.load=function(){for(var e=["identify","track","click","pageload","capture","retarget","presale_load","interstitial_load","upsell_load"],t=0;t<e.length;t++)blueshift[e[t]]=function(e){return function(){blueshift.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(e[t])}),blueshift.load(),blueshift.pageload();var a=window.location.pathname;a.indexOf("/pre")>-1&&blueshift.presale_load(),a.indexOf("/index")>-1&&blueshift.interstitial_load(),a.indexOf("/special-offer-")>-1&&blueshift.upsell_load(),blueshift.constructor===Array&&function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.getblueshift.com/blueshift.js",e.defer=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var l,d=window.siteSetting.campaignName;window.orderFired=!1;var c="";window.addEventListener("load",function(){i()})}();